# Техническое задание: Новогодняя игра «Своя игра»

## 1. Общая цель
Разработать веб‑приложение для проведения игры **«Своя игра»** в новогодней тематике.  
Приложение должно позволять администратору управлять ходом игры, а игрокам — участвовать в ней в реальном времени через браузер.

---

## 2. Технологический стек
**Backend**
- NestJS
- Prisma ORM
- MySQL

**Frontend**
- React

**Инфраструктура**
- Docker
- Docker Compose

**Обмен данными**
- HTTP polling (без WebSocket)
- Интервал опроса выносится в конфигурацию

---

## 3. Данные и структура вопросов
- В проекте существует папка `categories`
- В ней хранятся JSON‑файлы с категориями
- Каждая категория содержит:
  - название
  - список вопросов
  - количество очков за каждый вопрос
- Типы вопросов:
  - `text` — текстовый вопрос
  - `image` — вопрос с изображением

### Требование
Необходимо реализовать CLI‑команду, которая импортирует все категории и вопросы из JSON‑файлов в базу данных.

---

## 4. Роли и авторизация

### 4.1 Администратор
- Существует **один главный администратор**
- У администратора есть отдельная админ‑панель по отдельному URL
- Логин и пароль создаются автоматически при миграции БД  
  ```
  login: admin
  password: password
  ```

### 4.2 Игроки
- Игроки заходят через отдельную страницу входа
- Для входа требуется **только имя**
- Если игрок обновил страницу:
  - при вводе того же имени он возвращается в свой кабинет
  - повторная регистрация не создаётся

---

## 5. Игровой процесс

### 5.1 Главный экран
- Таблица категорий
- В каждой категории — ячейки с очками (100, 200, 300 и т.д.)
- Ниже таблицы:
  - список игроков
  - текущее количество очков у каждого

---

### 5.2 Выбор вопроса
1. Администратор просит игрока выбрать категорию и стоимость вопроса
2. Администратор выбирает соответствующий вопрос в админ‑панели
3. После выбора:
   - на главном экране вместо таблицы появляется вопрос
   - если тип `image` — отображается изображение
   - если тип `text` — отображается текст
   - у игроков появляется большая кнопка **«Ответить»**
   - у администратора отображается правильный ответ

---

### 5.3 Ответ игрока
- Первый игрок, нажавший кнопку **«Ответить»**, становится отвечающим
- В этот момент:
  - на главном экране подсвечивается отвечающий игрок
  - у остальных игроков кнопка блокируется
  - отображается текст: «Сейчас отвечает другой игрок»
  - у администратора видно, кто отвечает

---

### 5.4 Решение администратора

#### Ответ правильный
- Игроку начисляются очки за вопрос

#### Ответ неправильный
- У игрока вычитаются очки (допускаются отрицательные значения)
- Игрок помечается красным цветом
- Если есть другие игроки:
  - у них снова активируется кнопка «Ответить»
  - процесс повторяется

---

### 5.5 Дополнительные действия администратора
- **Показать ответ**
  - правильный ответ отображается на главном экране
- **Перейти к следующему вопросу**
  - текущая сессия вопроса завершается
  - снова отображается таблица с вопросами
  - используется, если никто не хочет отвечать
- **Ручное управление очками**
  - администратор может в любой момент добавить или убрать очки любому игроку

---

## 6. Завершение игры
- Когда все вопросы закончились:
  - отображается финальный экран
  - игроки отсортированы по очкам
  - от победителя к проигравшему

---

## 7. Обновление состояния
- Все клиенты обновляют состояние игры через HTTP‑запросы
- Частота обновления:
  - по умолчанию: 1 раз в секунду
  - значение выносится в конфигурационный файл
- WebSocket и SSE **не используются**

---

## 8. Дизайн и UX
- Новогодний стиль
- Современный и приятный UI
- Анимации переходов и состояний
- На главной странице:
  - анимация падающих снежинок
  - использовать готовый React‑пакет

---

## 9. Docker и запуск проекта
Необходимо подготовить:
- `docker-compose.yml`
- отдельные контейнеры для:
  - backend
  - frontend
  - MySQL
- Все сервисы должны использовать **нестандартные порты**
  - MySQL — не 3306
  - Backend — не 80
  - Frontend — не 80

### Требования
- Команды для:
  - сборки проекта
  - запуска проекта
  - применения миграций
  - импорта вопросов
- Краткая документация:
  - как запустить проект с нуля
  - как зайти в админ‑панель
  - как начать игру игрокам

---

## 10. Результат
На выходе должно быть полностью работоспособное веб‑приложение, готовое к использованию на новогодней вечеринке.
